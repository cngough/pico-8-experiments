pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
-- pico-8 stars
-- liquidream & chairs

function _init()
 -- init variables
 stars={}
 star_cols={1,2,5,6,7,9,10}
 warp_factor=3
 mega_warp = false
 controls_colour = 7
 mega_warp_colour = 7
 speed_colour = 7
 warping_colour = 7
 warping = false
 generating = true
 wait = 0

 -- create starfield
 for i=1,#star_cols do
  for j=1,10 do
	s={
  x=rnd(128),
  y=rnd(128),
  z=i,
  c=star_cols[i],
  die=false
 }
 add(stars,s)  end 
 end
end

function create_star()
	s={
  x=rnd(128),
  y=rnd(128),
  z=i,
  c=star_cols[i]
 }
 add(stars,s)
end

function _update60()
 if (warping) then
 	wait += 1
 end
 
 if (wait == 120) then
  for s in all(stars) do
			del(stars, s)
		end
 end

	if (warping) and count(stars) == 0 then
		warping = false
		generating = true
		wait = 0
	end
	
	if not warping and (generating) and count(stars) < 70 then
				random=flr(rnd(8))
			s={
  x=rnd(128),
  y=rnd(128),
  z=random,
  c=star_cols[random]
 	}
 	add(stars,s)
 elseif generating and count(stars) >= 70 then
 	generating = false
	end
 
	if(btn(0)) and not warping then
		del(stars, stars[count(stars)])
	end
	if(btn(1) and count(stars) < 250) and not warping then
		random=flr(rnd(8))
			s={
  x=rnd(128),
  y=rnd(128),
  z=random,
  c=star_cols[random]
 }
 add(stars,s)
	end
	if(btn(2)) and warp_factor < 10 and not warping then
  warp_factor+=0.1
 end
 if(btn(2) and btn(5) and warp_factor >= 10) and not warping then
 	mega_warp = true
 end
 if(btn(4)) and not warping and mega_warp then
 	mega_warp = false
 	warp_factor = 0.2
 	warping = true
		for s in all(stars) do
			s.die = true
		end

 	star_cols={rnd(15),rnd(15),rnd(15),rnd(15),rnd(15),rnd(15),rnd(15)}
 end
 if(btn(3)) and warp_factor > 0.2 and not warping then
  mega_warp = false
  warp_factor-=0.1
 end
 -- move stars
 for s in all(stars) do
 	if s.x < 0 or s.x > 128 then
 		s.x = rnd(128)
 	end 
 	
  -- move star, based on z-order depth
  if s.die then
  	s.y+=s.z*10/10
  else
   s.y+=s.z*warp_factor/10
  end
  
  if mega_warp then
   s.x+=rnd(10) - 5
  end
  
  -- wrap star around the screen
  if s.y>128 then
  	if (s.die) then
  		del(stars, s)
  	else
   s.y=0
   s.x=rnd(128)
   end
  end
 end
end

function _draw()
 cls()
 -- draw stars
 for s in all(stars) do
  pset(s.x,s.y,s.c)
  if (mega_warp) then
  	for i=1,rnd(10),1 do
  		pset(s.x,s.y+i,s.c)
			end
  end
 end
	if (warping) then
		warping_colour = 8
		controls_colour = 5
		mega_warp_colour = 5
	else
	 warping_colour = 5
	 controls_colour = 7
	end
	if (mega_warp) then
		mega_warp_colour = 8
		warping_colour = 7
	elseif (warp_factor >= 10) then
		mega_warp_colour = 7
	else
		mega_warp_colour = 5
	end
	
	 print("star count (‚¨ÖÔ∏è/‚û°Ô∏è):"..count(stars), controls_colour)
 print("warp speed (‚¨ÜÔ∏è/‚¨áÔ∏è):"..flr(warp_factor), controls_colour)

	print("mega warp (‚¨ÜÔ∏è+‚ùé):"..(mega_warp and 'enabled' or 'disabled'), mega_warp_colour)
 	print("change starspaces (üÖæÔ∏è)", warping_colour)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
07707770777077700000077007707070770077700000070007777700007007777700070000007770777000000000000000000000000000000000000000000000
70000700707070700000700070707070707007000000700077770770070077007770007007000070707000000000000000000000000000000000000000000000
7770070077707700000070007070707070700700000070007700077007007700077000700000007070700a000000000000000000000000000000000000000000
00700700707070700000700070707070707007000000700077700770070077007770007007000070707000000000000000000000000000000000000000000000
77000700707070700000077077000770707007000000070007777700700007777700070000000070777000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70707770777077700000077077707770777077000000070007777700007007777700070000007770000000000000000000000000000000000000000000000000
70707070707070700000700070707000700070700000700077707770070077000770007007000070000000000000000000000000000000000000000000000000
70707770770077700000777077707700770070700000700077000770070077000770007000000770000000000000000000000000000000000000000000000000
77707070707070000000007070007000700070700000700077000770070077707770007007000070000000000000000000000000000000000000000000000000
77707070707070000000770070007770777077700000070007777700700007777700070000007770a00000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55505550055055500000505055505550555000000500055555000000055555000500000055005550055055505550500055505500000000000000000000000000
55505000500050500000505050505050505000005000555055500500550505500050050050500500500050505050500050005050000000000000000000000000
50505500500055500000505055505500555000005000550005505550555055500050000050500500555055505500500055005050000000000000000000000000
50575000505050500000555050505050500000005000550005500500550505500050050050500500005050505050500050005050000000000000000000000000
5050555055505050000055505050505050000000a500055555000000055555000500050055505550550050505550555055505550000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05505050555055000550555000000550555055505550055055505550055055500550000005000555550005000000000000000000000000000000000000000000
50005050505050505000500000005000050050505050500050505050500050005000000050005500055000500000000000000000000000000000000000000000
50005550555050505000550000005550050055505500555055555550500055005550000050005505055000500000000000000000000000000000000000000000
50005050505050505050500000000050050050505050005050005050500050000050000050005500055000500000000000000000000000000000000000000000
05505050505050505550555000005500050050505050550050005050055055505500000005000555550005000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000
00000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000
00000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000900000000000000009000000000000000000000000000000000000000000000000
00000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000
000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000600000000000000000000000200600000000000000000000000010000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000
02000000050000000000000000000000000000000000000000000000000000000000000090000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000090000000
00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000
00000000000000000000000000000070000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000
00000000000000000000000000000000900000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000005000000006000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000
00000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

